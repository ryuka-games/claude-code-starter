# Claude Codeスターターキットを作った — 最小限で始めて育てるテンプレート設計

> Claude Codeの設定ファイル、どこまで書けばいいか分からない。CLAUDE.mdに何十行もルールを書いたけど効果が見えない。「最小限で始めて育てる」アプローチでスターターキットを作った話。

## Tags

`Claude Code` `CLAUDE.md` `テンプレート` `Boris Cherny` `設計思想`

## 問題: CLAUDE.mdの「書きすぎ」問題

Claude Codeを使い始めると、まずCLAUDE.mdにあれこれ書きたくなる:

- コーディング規約を全部書く
- セキュリティルールを列挙する
- テスト方針を詳細に書く
- プロジェクト構造を説明する

結果、50行以上のCLAUDE.mdができる。でも効果は薄い。なぜか？

**Claudeは元々それを知っている。** 一般的なセキュリティプラクティスやコーディング規約は、わざわざ書かなくてもClaudeは従う。書いても書かなくても同じなら、それはノイズでしかない。

## Boris Cherny哲学: 消したらClaudeがミスするか？

Claude Code創設者のBoris Chernyは「CLAUDE.mdは最小限で始めろ」と言っている。判断基準はシンプル:

> **そのルールを消したら、Claudeがミスするか？**
> NOなら消す。YESなら残す。

この基準で削ぎ落とすと、本当に必要なのは:
- ビルドコマンド（`npm run build`）
- テストコマンド（`npm test`）
- プロジェクト固有のルール（「このプロジェクトではXを使う」等）

これだけ。あとは使いながら、Claudeがミスしたときに「CLAUDE.mdに追記して同じミスを防げ」と言えばいい。

## スターターキットの構成

この考え方でテンプレートを作った。

```
template/
├── .claude/
│   ├── CLAUDE.md              # Build & Testだけ
│   ├── settings.json          # git自動承認 + hooks
│   ├── hooks/
│   │   ├── save-context.js    # コンテキスト永続化
│   │   ├── restore-context.js # コンテキスト復元
│   │   └── notify.js          # 回答完了/承認待ち通知
│   └── skills/
│       ├── fix-issue/SKILL.md # /fix-issue [番号]
│       ├── research/SKILL.md  # /research [トピック]
│       ├── spec/SKILL.md      # /spec [機能説明]
│       └── review/SKILL.md    # /review [対象]
├── .mcp.json.example
├── CLAUDE.local.md.example
└── .gitignore.append
```

### テンプレートに入れたもの（と理由）

| 入れたもの | Boris基準 |
|-----------|----------|
| Build & Testコマンド欄 | ないとClaudeがビルド・テストできない → YES |
| コンテキスト永続化hook | ないと圧縮のたびに文脈が消える → YES |
| 通知hook | ないと承認待ちに気づかず時間を浪費 → YES |
| /fix-issue, /research, /spec, /review | ワークフローの定型化。なくても動くが効率が大幅に下がる → YES |

### テンプレートに入れなかったもの（と理由）

| 入れなかったもの | Boris基準 |
|----------------|----------|
| セキュリティルール | Claudeが元々知ってる → NO |
| コーディング規約 | 同上 → NO |
| rules/ | プロジェクト固有。テンプレートで一般化できない → NO |
| agents/ | 必要になってから追加すべき → NO |

## 育て方: 3ステップ

テンプレートを導入した後の育て方:

1. **Claudeがミスしたら** → 修正後に「CLAUDE.mdを更新して同じミスを繰り返すな」と言う
2. **CLAUDE.mdが長くなってきたら** → 「CLAUDE.mdを見直して。不要なルールを整理して」
3. **hooks/rules/skills/agentsが必要になったら** → カスタマイズガイドを見て追加する

重要なのは**「必要になってから追加する」**こと。最初から全部入れると、何が効いていて何がノイズか分からなくなる。

## テンプレートに入れるかどうかの実際の判断

実例を一つ。コンテキスト永続化hookは最初テンプレートに入れない方針だった（ADR-001: "hooks/rules/agentsは初期テンプレートに含めない"）。

でも実際に使ってみて考え直した:

- コンテキスト消失は**全ユーザー共通の問題**（コミュニティ調査で確認）
- 言語やフレームワークに依存しない
- Boris基準「消したらClaudeがミスするか？」→ **YES**

方針を守ることより、ユーザーにとって本当に必要かどうかが大事。方針自体も育てていくもの。

## ワークフローskills: 調査→仕様→開発→レビュー

テンプレートに含まれるskillsは開発ワークフローに沿って設計されている:

```
/research [トピック]  → RESEARCH.md（調査）
        ↓ 対話で要件を精査
/spec [機能説明]      → SPEC.md（仕様）
        ↓ 対話で練り上げ
    開発（Claudeの本業）
        ↓
/review              → REVIEW.md（レビュー）
```

各skillは独立して使えるが、パイプラインとしてつなげることで「調査結果を仕様に反映」「仕様との照合レビュー」ができる。

## まとめ

- CLAUDE.mdは最小限で始める。「消してもClaudeがミスしないルール」は書かない
- テンプレートに入れるのは「ないとClaudeまたはユーザーが困るもの」だけ
- 使いながらClaude自身に育てさせる設計にする
- スターターキットは[GitHub](https://github.com/ryuka-games/claude-code-starter)で公開中
