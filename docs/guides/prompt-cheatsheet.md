# Claude Code プロンプト チートシート

> Boris Cherny Tips・公式ドキュメントから抽出したパワーフレーズ集。

## 早見表

| こういうとき | こう言う | 詳細 |
|---|---|:---:|
| 作りたいものがぼんやりしてる | `AskUserQuestionツールで詳しくインタビューして` | [>>](#作りたいものがぼんやりしてるとき) |
| バグ報告のURLが来た | `fix this [URL]` | [>>](#バグ報告のurlが来たとき) |
| Claudeの修正が3回目でもダメ | `これを捨てて、エレガントな解決策を実装して` | [>>](#修正を何度やってもダメなとき) |
| 本当に動くか不安 | `これが動くことを証明して` | [>>](#本当に動くか不安なとき) |
| 実装をレビューしたい | 別セッションで `シニアエンジニアとしてレビューして` | [>>](#実装をレビューしたいとき) |
| Claudeが同じミスを繰り返す | `CLAUDE.mdを更新して同じミスを繰り返すな` | [>>](#claudeが同じミスを繰り返すとき) |
| CLAUDE.mdが長くなってきた | `CLAUDE.mdを見直して。不要なルールや重複を整理して` | [>>](#claudemdが長くなってきたとき) |
| 話題が変わる | `/clear` | [>>](#話題が変わるとき) |
| セッションが長くなってきた | `/compact [残したい焦点]` | [>>](#セッションが長くなってきたとき) |

---

## 計画する

### 作りたいものがぼんやりしてるとき

> 「ユーザー認証を追加したい」とは思ってるけど、OAuth？JWT？セッション？詳細が決まっていない。

```
ユーザー認証を追加したい。AskUserQuestionツールを使って詳しくインタビューして。
技術的な実装、UI/UX、エッジケース、懸念点、トレードオフについて聞いて。
自明な質問はしないで、自分が考えていない難しい部分を掘り下げて。
全てカバーできたらSPEC.mdに完全なスペックを書いて。
```

Claudeが「認証方式は？」「トークンの有効期限は？」「ソーシャルログインは必要？」等、自分が考えていなかった論点を次々と質問してくる。全部答え終わると仕様書が出来上がる。

スペック完成後は `/clear` して新しいセッションで実装を開始するのがベスト。

---

## 直す

### バグ報告のURLが来たとき

> Slackで「+記号入りのメールアドレスだとログインエラーになる」と報告が来た。

```
fix this https://slack.com/archives/C0123/p456789
```

ClaudeがSlack MCPでスレッドを読み、バグの内容を理解し、コードを探して修正する。自分はURLを貼っただけ。

**前提**: Slack MCPが設定済みであること。GitHub Issueなら `gh` CLIがあればURLを貼るだけでOK。

### 修正を何度やってもダメなとき

> ログイン機能を修正させた。1回目→ダメ→指摘→2回目→まだバグ→指摘→3回目…。コードがパッチだらけで読めなくなってきた。

```
今わかっている全てを踏まえて、これを捨てて、エレガントな解決策を実装して
```

これまでの試行錯誤で学んだこと（何が動いて何が動かなかったか）を活かしつつ、パッチだらけのコードを捨ててゼロから書き直す。大抵これで通る。

> 3回修正してダメなら `/clear` して最初から具体的に指示し直すのも手。 — 公式 best-practices

---

## 確かめる

### 本当に動くか不安なとき

> Claudeが「修正しました」と言う。コードは正しそうに見える。でも本当に？

```
これが動くことを証明して
```

テストを走らせたり、mainブランチとfeatureブランチの振る舞いを比較したり、実際にAPIを叩いてレスポンスを見せたりして、動作を実証する。「たぶん動きます」ではなく証拠を出させる。

### 実装をレビューしたいとき

> 機能を実装した。PRを出す前にレビューしたい。でも実装したClaudeセッションに「レビューして」と言っても、自分が書いたコードには甘くなる。

**別のClaudeセッション**（別ターミナルやworktree）を開いて:

```
@src/middleware/rateLimiter.ts をシニアエンジニアとしてレビューして。
エッジケース、競合状態、既存パターンとの整合性を見て
```

実装のコンテキストがないフレッシュなClaudeが、純粋にコードだけ見て厳しいフィードバックを出す。レビュー結果を実装セッションに貼り付けて修正させる（Writer/Reviewerパターン）。

---

## 育てる

### Claudeが同じミスを繰り返すとき

> Claudeが `npm test` で毎回全テストを走らせてしまう。修正しても次のセッションではまた同じことをするだろう。

ミスを修正したあとに:

```
このミスを二度としないように、CLAUDE.mdを更新して
```

Claudeが自分でCLAUDE.mdに「テストは単体で実行する: `npm test -- --testPathPattern`」のようなルールを書く。次回のセッションからそのルールを読んで同じミスをしなくなる。

> Claudeは自分自身のルールを書くのが不気味なほど上手い。 — Boris Cherny

### CLAUDE.mdが長くなってきたとき

> 「CLAUDE.mdを更新して」を繰り返していたらルールが大量に溜まってきた。Claudeがルールを無視し始めた気がする。

```
CLAUDE.mdを見直して。もう不要なルールや重複を整理して
```

Claudeがルールを読み直し、もう守れているルール・重複・自明なものを削除・統合してくれる。CLAUDE.mdは短いほど効くので、定期的な棚卸しが必要。

> CLAUDE.mdは容赦なく編集し続けろ。Claudeのミス率が目に見えて下がるまで反復する。 — Boris Cherny

自分で `/memory` コマンドからエディタで手動整理してもOK。

---

## 整理する

### 話題が変わるとき

> さっきまでログイン機能の修正をしていた。次はREADMEを更新したい。全く別の作業。

```
/clear
```

コンテキスト（会話履歴）がリセットされる。無関係な情報が残っているとClaudeの注意が散って品質が落ちるので、タスクが変わったら必ずリセットする。

### セッションが長くなってきたとき

> 1つのタスクを長時間やっていて、コンテキストが膨らんできた。

```
/compact API変更に集中して
```

会話を要約するとき「API変更」に関する情報を優先的に残す。関係ない試行錯誤は捨て、重要な部分だけ保持される。

---

## 出典

- [Boris Cherny Tips](../boris-cherny-tips.md)
- [Claude Code Best Practices](https://code.claude.com/docs/en/best-practices)
- [Common Workflows](https://code.claude.com/docs/en/common-workflows)
